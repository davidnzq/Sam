# Tab 快捷键功能使用指南

## 功能概述

本次更新为 LongPort AI 助手添加了两个 Tab 键快捷功能：
1. 选中文本后，按下 Tab 键唤起 AI 助手弹窗
2. 在 AI 助手弹窗显示时，按下 Tab 键执行替换功能

## 实现内容

1. 在 `manifest.json` 中添加了命令 `show-ai-popup`，默认快捷键为 Tab
2. 在 `background.js` 中实现了 Tab 键唤起弹窗的逻辑：
   - 获取当前活动标签页中选中的文本
   - 向内容脚本发送显示弹窗的消息
3. 在 `content.js` 中添加了键盘事件监听：
   - 为弹窗添加 Tab 键监听，按下 Tab 键时执行替换功能
   - 为弹窗添加 Esc 键监听，按下 Esc 键时关闭弹窗

## 使用方法

### 唤起弹窗
1. 在支持的网站（Notion 或 LongPort 文档）中选中一段文字
2. 按下 Tab 键
3. AI 助手弹窗将显示，并开始优化选中的文本

### 替换文本
1. 当 AI 助手弹窗显示优化结果后
2. 按下 Tab 键
3. 选中的文本将被优化后的文本替换，并关闭弹窗

## 注意事项

- 如果快捷键冲突，用户可以在 Chrome 扩展管理页面 (chrome://extensions/shortcuts) 重新绑定快捷键
- 在不支持的网站上使用快捷键会显示提示信息
- 如果未选中文本就使用快捷键，会提示用户先选中文本
- 弹窗会自动获得焦点，以便接收键盘事件
- 除了 Tab 键外，还可以使用 Esc 键关闭弹窗

## 技术说明

- Tab 键唤起弹窗功能使用 Chrome 扩展的命令 API 实现
- Tab 键替换功能使用 DOM 事件监听实现
- 弹窗会自动获得焦点，确保键盘事件能被正确捕获
- 为避免与页面原有的 Tab 键行为冲突，事件处理中会阻止默认行为
