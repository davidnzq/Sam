# Notion AI 助手使用说明

## 🚀 快速开始

### 1. 安装插件
1. 打开 Chrome 浏览器
2. 访问 `chrome://extensions/`
3. 开启"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择 `Sam` 文件夹

### 2. 配置 API
1. 点击插件图标，选择"打开设置"
2. 配置公司内部 API（推荐）或 OpenAI API
3. 测试连接确保正常工作

### 3. 使用方法
1. 在 Notion 页面中选择要优化的文本
2. 右键点击，选择"AI 辅助协作"
3. 等待 AI 生成优化结果
4. 选择操作：覆盖原文、再试一下、取消

## 🔧 功能修复

### 问题：右键菜单显示但点击无反应

**解决方案 1：重新安装插件**
1. 删除现有插件
2. 重新加载修复后的版本
3. 刷新 Notion 页面

**解决方案 2：使用快速修复脚本**
1. 在 Notion 页面中按 F12 打开开发者工具
2. 在 Console 标签页中粘贴以下代码：

```javascript
// 复制 quick-fix.js 的全部内容并粘贴到控制台
```

**解决方案 3：检查权限**
1. 确保插件有访问 Notion 页面的权限
2. 检查 `manifest.json` 中的权限配置
3. 确认页面 URL 匹配 `https://*.notion.so/*`

## 📋 测试步骤

### 1. 基础功能测试
1. 打开 `test-notion.html` 页面
2. 选择任意文本段落
3. 右键点击，查看"AI 辅助协作"选项
4. 点击后应该出现 AI 弹窗

### 2. 弹窗功能测试
1. 弹窗应显示原文和 AI 优化结果
2. 测试三个按钮功能：
   - **覆盖原文**：用 AI 结果替换原文
   - **再试一下**：重新生成优化结果
   - **取消**：关闭弹窗

### 3. API 功能测试
1. 在设置页面测试 API 连接
2. 验证 AI 文本生成功能
3. 检查错误处理和重试机制

## 🐛 常见问题排查

### 1. 右键菜单不显示
- 检查插件是否启用
- 确认在 Notion 页面中
- 查看控制台错误信息

### 2. 弹窗不出现
- 检查内容脚本是否正确注入
- 查看控制台的调试信息
- 确认消息传递是否正常

### 3. AI 调用失败
- 检查网络连接
- 验证 API 配置
- 查看控制台的详细错误信息

### 4. 文本替换失败
- 确保文本已正确选择
- 检查页面权限
- 尝试刷新页面

## 🔍 调试方法

### 1. 查看控制台日志
- 按 F12 打开开发者工具
- 查看 Console 标签页
- 查找 "Notion AI 助手" 相关的日志

### 2. 使用调试页面
- 打开 `debug.html` 页面
- 检查插件状态和连接情况
- 使用内置的测试功能

### 3. 检查网络请求
- 在 Network 标签页查看 API 调用
- 确认请求和响应格式
- 检查错误状态码

## 📁 文件说明

### 核心文件
- `manifest.json` - 插件配置文件
- `background.js` - 后台脚本，处理 API 调用
- `content.js` - 内容脚本，注入到 Notion 页面
- `content.css` - 弹窗样式文件

### 设置和弹窗
- `options.html` - 设置页面
- `popup.html` - 插件弹窗
- `popup.js` - 弹窗脚本

### 测试和修复
- `test-notion.html` - Notion 页面模拟测试
- `debug.html` - 调试页面
- `quick-fix.js` - 快速修复脚本

## ⚠️ 注意事项

### 1. 图标文件
- 需要将 `icons/` 目录中的占位符文件替换为真实的 PNG 图标
- 图标尺寸：16x16, 48x48, 128x128

### 2. API 配置
- 公司内部 API 需要正确的 URL 和密钥
- OpenAI API 需要有效的 API 密钥
- 建议先测试连接再使用

### 3. 权限问题
- 确保插件有访问 Notion 页面的权限
- 检查 `manifest.json` 中的权限配置
- 确认页面 URL 匹配配置的模式

## 🆘 获取帮助

### 1. 自助排查
1. 查看本文档的故障排除部分
2. 使用调试页面检查状态
3. 查看控制台的错误信息

### 2. 联系支持
如果问题仍然存在，请：
1. 提供详细的错误信息
2. 说明使用的浏览器版本
3. 描述具体的操作步骤
4. 附上控制台的错误日志

---

**最后更新**: v1.0.1 修复版本
**支持浏览器**: Chrome 88+
**兼容性**: Notion Web 版本
