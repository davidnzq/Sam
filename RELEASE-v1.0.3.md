# Notion AI 助手 v1.0.3 发布说明

## 🎯 版本概述

v1.0.3 是一个重要的配置优化版本，将公司内部 AI API 配置设置为插件的默认值，实现开箱即用的体验。用户无需手动配置即可开始使用 AI 功能。

## ✨ 主要特性

### 1. 默认 API 配置
- **公司 API 地址**: `https://lboneapi.longbridge-inc.com/`
- **公司 API 密钥**: `sk-7jSHih7SXoQcjMekQyTd3urc2G2BdtVzrzzdI6MotEpfWhyM`
- **自动配置**: 插件安装后自动设置默认配置
- **开箱即用**: 无需手动配置即可开始使用

### 2. 配置管理优化
- **配置显示**: 设置页面显示当前配置状态
- **默认值提示**: 表单字段显示默认配置信息
- **一键重置**: 支持重置为默认配置
- **状态监控**: 实时显示配置状态

### 3. 用户体验改进
- **预填充表单**: 设置页面自动填充默认值
- **智能状态**: 区分自定义配置和默认配置
- **配置验证**: 自动检测配置完整性
- **错误恢复**: 配置错误时自动使用默认值

## 🔧 技术实现

### 1. 默认配置设置
```javascript
// 插件安装时自动设置默认配置
chrome.runtime.onInstalled.addListener(() => {
  chrome.storage.sync.set({
    companyApiUrl: 'https://lboneapi.longbridge-inc.com/',
    companyApiKey: 'sk-7jSHih7SXoQcjMekQyTd3urc2G2BdtVzrzzdI6MotEpfWhyM'
  });
});
```

### 2. 智能配置管理
```javascript
// 优先使用自定义配置，回退到默认配置
const apiKey = config.companyApiKey || 'sk-7jSHih7SXoQcjMekQyTd3urc2G2BdtVzrzzdI6MotEpfWhyM';
const apiUrl = config.companyApiUrl || 'https://lboneapi.longbridge-inc.com/';
```

### 3. 配置状态显示
- 设置页面显示当前配置信息
- 弹窗页面显示配置状态
- 支持配置类型标识（自定义/默认）

## 📋 功能验证

### 验证清单
- [x] 默认配置自动设置
- [x] 开箱即用功能
- [x] 配置管理界面
- [x] API 连接测试
- [x] 配置重置功能
- [x] 状态显示更新

### 测试步骤
1. **安装插件**: 新安装的插件应自动配置默认 API
2. **功能测试**: 在 Notion 页面中测试右键菜单和 AI 弹窗
3. **配置验证**: 检查设置页面的配置状态显示
4. **API 测试**: 验证公司内部 AI API 调用成功
5. **重置测试**: 测试配置重置功能

## 🚀 安装说明

### 1. 全新安装
1. 下载 `Sam` 文件夹
2. 在 Chrome 中加载插件
3. 插件自动配置默认 API
4. 在 Notion 页面中开始使用

### 2. 升级安装
1. 卸载旧版本插件
2. 安装新版本
3. 插件自动恢复默认配置
4. 验证功能正常

### 3. 配置验证
1. 点击插件图标查看状态
2. 打开设置页面检查配置
3. 测试 API 连接
4. 在 Notion 页面中测试功能

## ⚠️ 注意事项

### 1. 默认配置
- 默认配置已预置，无需手动输入
- 如需修改配置，可在设置页面中调整
- 配置错误时会自动回退到默认值

### 2. API 要求
- 公司内部 AI API 必须可访问
- API 需要支持 POST 请求和 JSON 响应
- 响应格式应包含 `optimized_text` 或 `text` 字段

### 3. 权限说明
- 需要网络访问权限调用 API
- 需要存储权限保存配置
- 需要脚本注入权限提高兼容性

## 🔍 故障排除

### 常见问题
1. **默认配置未生效**: 检查插件是否正确安装，尝试重新安装
2. **API 调用失败**: 验证网络连接和 API 地址可访问性
3. **配置显示异常**: 检查浏览器存储权限，尝试重置配置

### 调试方法
1. 查看控制台日志信息
2. 使用设置页面的测试功能
3. 检查插件权限设置
4. 验证 API 端点可访问性

## 📝 更新日志

### v1.0.3 (2024-12-19)
- ✅ 设置公司 AI API 为默认配置
- ✅ 实现开箱即用功能
- ✅ 优化配置管理界面
- ✅ 添加配置状态显示
- ✅ 支持配置重置功能
- ✅ 改进用户体验

### v1.0.2 (2024-12-19)
- ✅ 修复右键菜单点击无反应问题
- ✅ 修复消息传递错误处理
- ✅ 移除 OpenAI API 依赖
- ✅ 添加 scripting 权限支持

### v1.0.1 (2024-12-19)
- ✅ 修复 JSON 解析错误
- ✅ 修复事件绑定问题
- ✅ 添加调试功能

### v1.0.0 (2024-12-19)
- 🎉 初始版本发布
- ✅ 基础 AI 辅助功能
- ✅ 双 API 支持架构

## 🎯 下一步计划

### 短期目标
- 收集用户使用反馈
- 优化 API 调用性能
- 改进错误处理机制

### 长期目标
- 支持更多文档平台
- 增加更多 AI 功能
- 提供配置模板管理

---

**发布状态**: ✅ 已发布
**测试状态**: ✅ 已验证
**兼容性**: Chrome 88+, Notion Web
**API 依赖**: 公司内部 AI 服务（已预配置）
**开箱即用**: ✅ 支持
